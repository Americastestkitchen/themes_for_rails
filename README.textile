h1. Theme For Rails (3 and hopefully later)

h2. Features list / Wish list

* Support for adding themes which includes stylesheets, javascripts, views and layouts. 

<pre>
$app_root
  themes/
    [theme_name]
      images/
      stylesheets/
      javascripts/
      views/           <- you can override application views
        layouts/         <- layout .rhtml or .liquid templates
</pre>

h2. Instructions

* Add themes_for_rails to your Gemfile.
* Add themes_for_rails to your config/routes.rb

Now you'll be able to use themes like this:

Inside method, for some exlicit action:

<pre>
class MyController < ApplicationController
  def show
    theme "purple"
  end
end
</pre>

Or at class level definition, in order to set a theme for more than one action. I think this is is prettier, and less invasive. 

<pre>
class MyController < ApplicationController
  theme "purple" # all actions will use this theme
  def show
    ...
  end
end
</pre>

You could also enable a theme for some actions only

<pre>
class MyController < ApplicationController
  theme "purple", :only => :show
  def show
    # with theme
  end
  def edit
    # no theme
  end
end
</pre>

As a plus, you could do this: 

<pre>
class MyController < ApplicationController
  theme :theme_resolver
  # ...
private
  def theme_resolver
    current_user.theme # or anything else that return a string. 
  end
end
</pre>

h3. Url Helpers

In your views you should be able to access your assets like this (given the theme 'default' is set):

* current_theme_image_path('logo.png') # => /themes/default/images/logo.png
* current_theme_stylesheet_path('style') # => /themes/default/stylesheets/logo.css
* current_theme_javascript_path('app') # => /themes/default/stylesheets/app.js

h2. Ideas

* Add ThemesForRails::Railtie for configuration, so we selectively set the plugin on or off. Also to be able to change several settings. 
* Add routes to allow access to the theme's static resources (js and cs), unless cached on public folder by capistrano / rake. 
* Extend Action View path in order to make the views accessible. Same for the layouts. 

h2. Things to remember.

* -Final version should be a gem. Initialization hooks doesn't work when using this as a plugin (vendor/plugins).-
* -Research about testing this kind of gem. I really don't have a clue.- Testing in place!
* I should probably load the theme list at start time, to be able to consult it as needed. I am gonna need that when dealing with runtime  theme selection. Many themes are going to be used simultaneously, so I have to be able to swith view paths as fast as I can. 


h2. Running tests

<pre>
gem install bundler
bundle install
rake
</pre>

h2. Authors and contributors

* lucasefe
